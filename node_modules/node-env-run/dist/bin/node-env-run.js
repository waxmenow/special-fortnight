#!/usr/bin/env node
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var Debug = require("debug");
var cli_1 = require("../lib/cli");
var utils_1 = require("../lib/utils");
var repl_1 = require("repl");
var debug = Debug('node-env-run');
var args = cli_1.parseArgs(process.argv);
debug("Parsed args: [" + args.program.args.join(', ') + "]");
debug("Parsed script: \"" + args.script + "\"");
var cli = cli_1.init(args);
if (cli.isRepl) {
    repl_1.start({});
}
else if (cli.script !== undefined) {
    var argv = utils_1.constructNewArgv(process.argv, cli.script, args.program.newArguments);
    debug("Overriding process.argv with the following arguments: [" + argv + "]");
    process.argv = argv;
    debug("Execute script: " + cli.script);
    require(cli.script);
}
else {
    console.error(cli.error);
    process.exit(1);
}
